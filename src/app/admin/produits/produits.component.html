<!-- Dashboard -->
<div class="d-flex flex-column flex-lg-row h-lg-full bg-surface-secondary">
   <app-sidebar></app-sidebar>
    <!-- Main content -->
    <div class="h-screen flex-grow-1 overflow-y-lg-auto">
        <!-- Header -->
        <header class="bg-surface-primary border-bottom pt-6">
            <div class="container-fluid">
                <div class="mb-npx">
                    <div class="row align-items-center">
                        <div class="col-sm-6 col-12 mb-4 mb-sm-0">
                            <!-- Title -->
                            <h1 class="h2 mb-0 ls-tight"> </h1>
                        </div>
                       
                    </div>
                </div>
            </div>
        </header>
        <!-- Main -->
        <main class="py-6 bg-surface-secondary">
            <div class="container-fluid">
               <br> <br><br>
                <div class="card shadow border-0 mb-7">
                    <div class="container-fluid">
                     <br>
                <div class="mb-npx">
                    <div class="row align-items-center">
                        <div class="col-sm-6 col-12 mb-4 mb-sm-0">
                            <!-- Title -->
                            <h1 class="h2 mb-0 ls-tight">Produits</h1>
                        </div>
                        <!-- Actions -->
                        <div class="col-sm-6 col-12 text-sm-end">
                            <div class="mx-n1">
                               
                                <button mat-raised-button class="btn d-inline-flex btn-sm btn-primary mx-1" (click)="openAddEditProdForm()" style="color: blueviolet; font-weight:bold ;" >
                                    <span class=" pe-2">
                                        <i class="bi bi-plus"></i>
                                    </span>
                                    <span>Ajouter</span>
                                </button>&nbsp;
                                <input 
                                #searchInput
                                type="text" 
                                placeholder="Recherche ..." 
                                style="border: 1px solid gray; height: 38px; border-radius: 10px; padding: 10px;"
(keyup)="filterTable(searchInput.value)"                             />
                            </div>
                        </div>
                    </div>
                </div>
            </div>

<br>

                    <div class="table-responsive">
                     
                        <table class="table table-hover table-nowrap">
                            <thead class="thead-light">
                                <tr>
                                    <th scope="col">Produit</th>
                                    <th scope="col"> Description </th>
                                    <th scope="col">Quantité</th>
                                    <th scope="col">Derniére modification</th>
                                    <th scope="col"> Prix  </th>
                                    <th scope="col"> Categorie</th>
                                    <th style="text-align: center;" >Actions </th>
                                </tr>
                            </thead>
                            <tbody   #productTableBody>
                                <tr *ngFor="let produit of getData">
                                    <td>
                                        <img alt="..." src="https://images.unsplash.com/photo-1502823403499-6ccfcf4fb453?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=3&w=256&h=256&q=80" class="avatar avatar-sm rounded-circle me-2">
                                        <a class="text-heading font-semibold" >
                                            {{ produit.nom}}
                                        </a>     
                                    </td>
                                    <td> {{ produit.description}} </td>
                                    <td>
                                       <span>{{ produit.quantite }} unités </span> <br>
<span  [ngStyle]="{ color: produit.quantite === 0 ? 'red' : (produit.quantite >= 10 ? 'green' : 'orange') }" >
  {{ produit.quantite === 0 ? 'Épuisé' : (produit.quantite >= 10 ? 'Disponible' : 'Presque épuisé') }}
</span>

                                    </td>
                                    <td> {{produit.dateAjout | date }} </td>
                                    <td>{{ produit.prix}} dt</td>
                                    <td> {{ produit.categorieNom }} </td> 
                                    <td  style="text-align: center;"  >
                                       
                                         <button type="button" class="btn btn-sm btn-square btn-neutral text-danger-hover"  (click)="openEditCatForm(produit)">
                                              <i class="bi bi-pencil"></i>
                                        </button>
                                        <button type="button" class="btn btn-sm btn-square btn-neutral text-danger-hover"   (click)="deleteProduit(produit.id)">
                                            <i class="bi bi-trash"></i>
                                        </button>
                                        
                                
                                    </td>
                                </tr>
                               
                            </tbody>
                        </table>
                    </div>
                    <div class="card-footer border-0 py-5">
                        <span class="text-muted text-sm"></span>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<router-outlet></router-outlet>
